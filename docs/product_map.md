# 剧本杀创作助手 - 产品开发地图

最后更新时间: 2024-02-04 00:15:00 UTC

## 项目概述
一个专业的个人剧本杀创作辅助工具，帮助创作者快速生成、管理和优化剧本内容。

### AI能力应用
1. 剧本创作辅助
   - 故事梗概生成：根据主题和关键词生成完整故事梗概
   - 剧情展开建议：为关键节点提供剧情发展建议
   - 情节冲突设计：智能生成矛盾冲突点
   - 结局设计建议：根据前文提供合理的结局方案

2. 角色设计辅助
   - 角色背景生成：智能生成符合主题的角色背景故事
   - 性格特征设计：生成合理的性格特征组合
   - 角色动机生成：设计符合背景的行为动机
   - 角色关系建议：提供合理的角色关系网络

3. 线索系统辅助
   - 线索内容生成：根据剧情自动生成关键线索
   - 线索分布建议：优化线索分布的时间点和载体
   - 线索关联分析：检查线索之间的关联性
   - 难度平衡建议：评估线索难度并提供调整建议

4. 对话内容生成
   - 场景对话生成：生成符合场景的对话内容
   - 人物对话风格：根据角色特征生成个性化对话
   - 关键信息植入：在对话中巧妙植入线索
   - 情感互动设计：生成体现角色关系的对话

5. 智能分析优化
   - 剧情逻辑检查：分析故事情节的逻辑性
   - 人物行为分析：检查角色行为的合理性
   - 线索完整性：验证线索系统的完整性
   - 游戏体验评估：分析游戏流程的平衡性

### 计费模式
采用积分制，按AI功能使用量计费：

1. 积分消耗项目
   - 故事梗概生成：100积分/次
   - 角色设计生成：50积分/角色
   - 线索内容生成：30积分/条
   - 对话内容生成：20积分/段
   - 智能分析检查：50积分/次

2. 积分获取方式
   - 新用户注册赠送：500积分
   - 积分充值套餐：
     * 基础包：￥50/1000积分
     * 标准包：￥100/2500积分
     * 专业包：￥200/6000积分
   - 季度订阅：￥300/季度，每月3000积分
   - 年度订阅：￥1000/年，每月4000积分

3. 积分使用规则
   - 积分永久有效
   - 订阅用户每月定额发放
   - 超出额度可额外购买积分
   - 支持余额查询和使用明细

### 核心功能模块
1. 智能创作系统
   - 剧本大纲生成：基于主题和关键词智能生成剧本框架
   - 角色设定生成：自动生成符合主题的角色背景和性格特征
   - 线索系统生成：智能设计线索分布和关联关系
   - 剧情流程生成：自动生成完整的剧情发展脉络
   - 对话内容生成：根据角色特征生成个性化对话

2. 编辑管理系统
   - 剧本编辑器：支持富文本编辑、实时保存、版本管理
   - 角色管理器：角色信息管理、关系图谱可视化
   - 线索管理器：线索卡片管理、线索时间线展示
   - 剧情编排：场景设计、关键节点管理、剧情逻辑检查
   - 资源管理：图片、音频、道具卡等素材管理

3. 导出系统
   - 版本管理：完整的版本历史和回滚功能
   - 导出功能：支持多种格式导出（PDF、Word、图片等）
   - 分发管理：角色剧本、线索卡自动分发
   - 打印优化：针对不同内容的打印布局优化

4. 辅助功能
   - 智能分析：剧情逻辑分析、人物关系检查
   - 平衡建议：游戏难度评估、线索分布优化
   - 质量检查：情节完整性检查、逻辑一致性验证
   - 数据统计：创作数据分析、使用情况统计

5. 个人中心
   - 作品管理：剧本作品的分类和管理
   - 创作模板：常用创作模板的保存和使用
   - 个性化设置：界面和功能的个性化配置
   - 使用统计：个人创作数据统计和分析

### 技术特点
1. AI驱动
   - 深度学习模型支持
   - 自然语言处理
   - 智能内容生成
   - 逻辑分析优化

2. 本地优先
   - 本地数据存储
   - 离线工作支持
   - 自动备份恢复
   - 快速响应处理

3. 安全可靠
   - 数据加密存储
   - 本地文件管理
   - 操作日志记录
   - 版本历史追踪

## 整体开发进度：50%

### 已完成功能 ✅
1. 项目基础设施 (90%)
   - [x] 前端框架搭建 (React + TypeScript)
   - [x] 后端框架搭建 (Node.js + Express)
   - [x] 项目配置完成
   - [x] 基础路由系统
   - [x] 开发环境配置
   - [ ] 部署配置

2. AI服务集成 (80%)
   - [x] Deepseek API 集成
   - [x] 角色分析功能
   - [x] 对话生成功能
   - [x] 内容优化服务
   - [ ] 剧本生成适配

3. 基础功能模块 (70%)
   - [x] 角色管理系统
   - [x] 时间线系统
   - [x] 用户认证基础
   - [x] 数据存储服务
   - [ ] 文件管理系统

### 进行中功能 🚧
1. 剧本创作功能 (20%)
   - [x] 创意发想表单
   - [x] 基础编辑界面
   - [ ] AI 生成接口
   - [ ] 剧本编辑器
   - [ ] 版本管理

2. 编辑器功能 (15%)
   - [x] 基础界面
   - [x] 表单验证
   - [ ] 富文本编辑
   - [ ] 实时保存
   - [ ] 版本控制

3. 文档系统 (75%)
   - [x] API文档
   - [x] 开发文档
   - [x] 架构文档
   - [ ] 使用手册

### 待开发功能 ⏳
1. 人物管理模块 (0%)
   - [ ] 角色信息管理
   - [ ] 人物关系图谱
   - [ ] 角色背景编辑
   - [ ] 动机与目标设置

2. 线索系统模块 (0%)
   - [ ] 线索卡片管理
   - [ ] 线索关联分析
   - [ ] 线索时间线
   - [ ] 线索分发规则

3. 剧情编排模块 (0%)
   - [ ] 剧情流程图
   - [ ] 场景设计工具
   - [ ] 关键节点管理
   - [ ] 剧情逻辑检查

4. 用户系统 (0%)
   - [ ] 用户认证
   - [ ] 作品管理
   - [ ] 个人设置
   - [ ] 数据统计

## 技术需求
1. 前端技术栈
   - [x] React + TypeScript
   - [x] Ant Design 组件库
   - [x] 状态管理方案
   - [ ] 测试框架

2. 后端服务
   - [x] Express 框架
   - [x] TypeScript
   - [x] MongoDB
   - [ ] Redis 缓存
   - [ ] 消息队列

3. 基础设施
   - [x] 数据库设计
   - [ ] 文件存储
   - [ ] CI/CD
   - [ ] 监控系统

## 开发计划
### 近期目标（2周内）
1. 完成 AI 生成接口对接
2. 实现基础剧本编辑器
3. 开发人物管理基础功能

### 中期目标（1-2月）
1. 完善线索系统
2. 实现剧情编排工具
3. 构建用户系统

### 长期目标（3-6月）
1. 优化生成质量
2. 添加协同功能
3. 完善运营工具

## 并行开发模块

### 模块一：AI生成引擎 (核心功能)
1. 开发内容
   - 故事梗概生成器
   - 角色设计生成器
   - 线索系统生成器
   - 对话内容生成器
   - 智能分析系统

2. 技术重点
   - Deepseek API集成
   - 提示词工程优化
   - 内容质量控制
   - 响应速度优化

3. 预计工期：3周
   - 第1周：API集成和基础生成
   - 第2周：质量优化和特殊场景
   - 第3周：性能优化和异常处理

### 模块二：编辑器系统
1. 开发内容
   - 富文本编辑器
   - 角色管理界面
   - 线索管理界面
   - 剧情编排工具
   - 版本控制系统

2. 技术重点
   - 编辑器框架选型
   - 数据实时保存
   - 版本历史管理
   - 界面交互优化

3. 预计工期：2周
   - 第1周：基础功能实现
   - 第2周：优化和集成测试

### 模块三：导出系统
1. 开发内容
   - PDF导出模块
   - Word导出模块
   - 角色卡生成器
   - 线索卡生成器
   - 打印布局优化

2. 技术重点
   - 文档转换引擎
   - 模板系统设计
   - 排版引擎开发
   - 批量处理优化

3. 预计工期：2周
   - 第1周：核心功能开发
   - 第2周：样式优化和测试

### 模块四：用户中心
1. 开发内容
   - 用户认证系统
   - 作品管理系统
   - 积分管理系统
   - 个人设置功能

2. 技术重点
   - 用户数据管理
   - 积分系统设计
   - 安全性保障
   - 性能优化

3. 预计工期：2周
   - 第1周：基础功能实现
   - 第2周：安全性和性能优化

### 模块五：基础设施
1. 开发内容
   - 数据库优化
   - 文件存储系统
   - 监控告警系统
   - 部署自动化

2. 技术重点
   - 数据库性能
   - 存储系统设计
   - 监控系统搭建
   - CI/CD流程

3. 预计工期：2周
   - 第1周：基础设施搭建
   - 第2周：性能优化和测试

## 开发团队分配
1. AI生成引擎团队（3人）
   - 1名AI算法工程师
   - 1名后端工程师
   - 1名提示词工程师

2. 编辑器团队（2人）
   - 1名前端工程师
   - 1名UI/UX设计师

3. 导出系统团队（2人）
   - 1名全栈工程师
   - 1名前端工程师

4. 用户中心团队（2人）
   - 1名后端工程师
   - 1名前端工程师

5. 基础设施团队（2人）
   - 1名运维工程师
   - 1名后端工程师

## 里程碑计划
1. 第一阶段（3周）
   - AI生成引擎基础功能
   - 编辑器核心功能
   - 用户认证系统

2. 第二阶段（2周）
   - 导出系统完成
   - 积分系统上线
   - 基础设施完善

3. 第三阶段（2周）
   - 功能整体联调
   - 性能优化
   - 上线准备

## 项目目录结构
```
.
├── .git-config/                    # Git配置 (100%)
├── .github/                        # GitHub工作流配置 (50%)
├── .vscode/                        # VS Code配置 (100%)
├── admin/                          # 前端管理系统 (60%)
│   ├── public/                     # 静态资源 (80%)
│   ├── src/                        # 源代码 (60%)
│   │   ├── assets/                # 资源文件 (100%)
│   │   ├── components/            # 公共组件 (70%)
│   │   ├── hooks/                 # 自定义Hooks (50%)
│   │   ├── layouts/               # 布局组件 (90%)
│   │   ├── pages/                 # 页面组件 (40%)
│   │   │   ├── Dashboard/         # 仪表盘 (60%)
│   │   │   ├── content/          # 内容管理 (30%)
│   │   │   └── script/           # 剧本管理 (20%)
│   │   ├── services/              # API服务 (40%)
│   │   ├── types/                 # 类型定义 (80%)
│   │   └── utils/                 # 工具函数 (70%)
├── backend/                        # 后端服务 (70%)
│   ├── src/                       # 源代码 (70%)
│   │   ├── controllers/          # 控制器 (80%)
│   │   ├── middlewares/          # 中间件 (70%)
│   │   ├── models/               # 数据模型 (90%)
│   │   ├── routes/               # 路由定义 (80%)
│   │   ├── services/             # 业务服务 (75%)
│   │   │   ├── ai.service.ts     # AI服务 (80%)
│   │   │   ├── auth.service.ts   # 认证服务 (90%)
│   │   │   ├── character.service.ts # 角色服务 (85%)
│   │   │   └── timeline.service.ts  # 时间线服务 (90%)
│   │   └── utils/                # 工具函数 (85%)
├── config/                         # 配置文件 (70%)
│   ├── app/                      # 应用配置 (80%)
│   ├── docker/                   # Docker配置 (50%)
│   ├── env/                      # 环境配置 (90%)
│   ├── monitoring/               # 监控配置 (40%)
│   └── vault/                    # 密钥配置 (60%)
├── docs/                           # 文档 (75%)
│   ├── api/                      # API文档 (90%)
│   ├── architecture/             # 架构文档 (85%)
│   │   └── adr/                 # 架构决策记录 (70%)
│   ├── development/              # 开发文档 (80%)
│   ├── database/                 # 数据库文档 (70%)
│   └── workflow/                 # 工作流程文档 (60%)
├── migrations/                     # 数据库迁移 (40%)
├── monitoring/                     # 监控系统 (30%)
├── scripts/                        # 工具脚本 (60%)
├── src/                           # 主程序源码 (0%)
├── tests/                         # 测试代码 (40%)
└── uploads/                       # 上传文件 (20%)
```

## 更新日志
### 2024-02-03
- 完成项目基础框架搭建
- 实现创意发想表单
- 配置基本路由系统
- 搭建后端服务框架
- 完成 AI 服务集成
- 实现角色和时间线基础功能
- 完成项目目录结构梳理和进度评估 